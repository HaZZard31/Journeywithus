<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∂∏‡∂ú‡∑ö ‡∑Ñ‡∂Ø‡∑Ä‡∂≠‡∑ö ‡∂±‡∑í‡∑Ä‡∑Ñ‡∂±</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind for Custom Colors --><script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'rose-gold': '#A55B66', 
                        'soft-pink': '#F7E7E8', 
                        'deep-red': '#C0392B',  
                        'light-bg': '#FFFCF9', 
                    },
                    fontFamily: {
                        script: ['Great Vibes', 'cursive'],
                        sans: ['Inter', 'Noto Sans Sinhala', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom font import for the elegant script look */
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
        
        /* --- ANIMATED BACKGROUND STYLING (Romantic Gradient) --- */
        body {
            /* Sets up the warm, romantic gradient colors used in the animation */
            background: linear-gradient(-45deg, #F7E7E8, #FFFCF9, #F7E7E8, var(--rose-gold-css, #A55B66));
            background-size: 400% 400%; 
            animation: gradientMove 15s ease infinite; 
            
            font-family: 'Inter', 'Noto Sans Sinhala', 'Iskoola Pota', sans-serif;
            position: relative; 
        }

        /* Dynamically set the CSS variable based on the Tailwind config for the gradient */
        :root {
            --rose-gold-css: #A55B66;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* FIX: Ensure content sections are fully opaque (solid background) for high text contrast */
        .bg-light-bg {
            background-color: #FFFCF9; /* Fully opaque light background */
            position: relative; 
            z-index: 10; 
        }
        .bg-white {
            background-color: #FFFFFF; /* Fully opaque white background */
            position: relative;
            z-index: 10;
        }
        /* Make deep-red section fully opaque for contrast */
        .bg-deep-red {
            position: relative;
            z-index: 10;
        }
        
        /* --- END NEW STYLING --- */

        .fade-in {
            animation: fadeIn 3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .heart-beat {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* --- KISS EMOJI ANIMATION STYLING (Slow) --- */
        .kiss-emoji {
            position: absolute;
            font-size: 2.5rem; 
            opacity: 0;
            user-select: none; 
            pointer-events: none; 
            animation: kiss-animation 4s ease-out forwards; 
            z-index: 1000; 
        }

        @keyframes kiss-animation {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 0.8;
            }
            100% {
                transform: translate(var(--final-x, 0px), var(--final-y, -400px)) scale(1.5); 
                opacity: 0; 
            }
        }
    </style>
    <!-- Font Awesome for icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="font-sans text-gray-900">

    <!-- Scroll Fade Overlay: This changes opacity on scroll to simulate theme fade -->
    <div id="scroll-overlay" class="fixed inset-0 bg-white z-[5] pointer-events-none" style="opacity: 0;"></div>

    <!-- Hero Section: Main Message --><section class="bg-light-bg py-24 px-6 md:px-12 shadow-xl">
        <div class="max-w-4xl mx-auto text-center fade-in">
            <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∂Ü‡∂∏‡∂±‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∂´‡∂∫ --><p class="text-3xl text-rose-gold mb-4 tracking-wider">‡∂∏‡∑è‡∂ú‡∑ö ‡∂Ü‡∂Ø‡∂ª‡∂´‡∑ì‡∂∫ ‡∂∏‡∑è‡∂∞‡∑Ä‡∑ì ‡∑Ä‡∑ô‡∂≠‡∂ß,</p>
            <h1 class="font-script text-6xl sm:text-7xl md:text-9xl text-deep-red leading-tight mb-8">
                "‡∂î‡∂∂ ‡∂∏‡∑è‡∂ú‡∑ö ‡∑Ñ‡∑î‡∑É‡∑ä‡∂∏‡∂∫‡∑í"
            </h1>
            <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫ --><p id="main-message-text" class="text-xl md:text-2xl text-gray-600 max-w-2xl mx-auto">
                ‡∂î‡∂∂ ‡∑É‡∂∏‡∂ü ‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂± ‡∑É‡∑ë‡∂∏ ‡∂Ø‡∑í‡∂±‡∂ö‡∑ä‡∂∏ ‡∂∏‡∑è‡∂ú‡∑ö ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∑ö ‡∑Ñ‡∑ú‡∂≥‡∂∏ ‡∂Ø‡∑Ä‡∑É‡∂∫‡∑í. ‡∂∏‡∑è ‡∂î‡∂∂ ‡∂ö‡∑ô‡∂ª‡∑ô‡∑Ñ‡∑í ‡∂á‡∂≠‡∑í ‡∂Ü‡∂Ø‡∂ª‡∂∫‡∑ö ‡∂ö‡∑ú‡∂ß‡∑É‡∂ö‡∑ä ‡∂ª‡∂≥‡∑Ä‡∑è ‡∂≠‡∂∂‡∑è ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß ‡∂∏‡∑ô‡∂∏ ‡∂ö‡∑î‡∂©‡∑è ‡∂Ö‡∑Ä‡∂ö‡∑è‡∑Å‡∂∫ ‡∂±‡∑í‡∂ª‡∑ä‡∂∏‡∑è‡∂´‡∂∫ ‡∂ö‡∑Ö‡∑ô‡∂∏‡∑í.
            </p>
            <div class="mt-10 space-y-4">
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∂ª‡∑Ñ‡∑É‡∂ö‡∑ä ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂∂‡∑ú‡∂≠‡∑ä‡∂≠‡∂∏ -->
                <button id="reveal-message" class="px-8 py-4 bg-rose-gold text-white font-bold rounded-full shadow-lg hover:bg-deep-red transition duration-300 heart-beat focus:outline-none focus:ring-4 focus:ring-rose-gold focus:ring-opacity-50">
                    <i class="fas fa-heart mr-2"></i> ‡∂ª‡∑Ñ‡∑É‡∂ö‡∑ä ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂î‡∂∂‡∂±‡∑ä‡∂±!
                </button>
                
                <!-- NEW: TTS Button (Gemini API Integration) -->
                <button id="tts-button" class="block w-full md:w-auto mx-auto px-8 py-3 bg-white text-rose-gold border-2 border-rose-gold font-bold rounded-full shadow-lg hover:bg-soft-pink transition duration-300 focus:outline-none">
                    <i class="fas fa-volume-up mr-2"></i> ‚ú® ‡∂∏‡∂ú‡∑ö ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂Ö‡∑É‡∂±‡∑ä‡∂±
                </button>
                <div id="tts-status" class="text-sm text-rose-gold mt-2 min-h-[20px]"></div>
            </div>
        </div>
    </section>

    <!-- Secret Message Area --><section id="secret-message" class="hidden py-10 px-6 text-center bg-deep-red text-white">
        <div class="max-w-3xl mx-auto">
            <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∂ª‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫ --><h2 class="text-3xl md:text-4xl font-bold mb-4">‡∂î‡∂∂ ‡∂∏‡∑è ‡∂Ø‡∂±‡∑ä‡∂±‡∑è ‡∂Ω‡∑É‡∑ä‡∑É‡∂±‡∂∏ ‡∂Ü‡∂≠‡∑ä‡∂∏‡∂∫‡∂∫‡∑í.</h2>
            <p class="text-lg">
                ‡∂∏‡∂∏ ‡∑É‡∑ê‡∂∏‡∑Ä‡∑í‡∂ß‡∂∏ ‡∂î‡∂∂ ‡∑Ä‡∑ô‡∂±‡∑î‡∑Ä‡∑ô‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì‡∂∏‡∂ß, ‡∂î‡∂∂ ‡∑É‡∂∏‡∂ü ‡∑É‡∑í‡∂±‡∑è‡∑É‡∑ì‡∂∏‡∂ß, ‡∑É‡∑Ñ ‡∂Ö‡∂Ø‡∂ß ‡∑Ä‡∂©‡∑è ‡∑Ñ‡∑ô‡∂ß ‡∂î‡∂∂‡∂ß ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î ‡∑Ä‡∑ô‡∂∏‡∑í. ‡∂î‡∂∂ ‡∂î‡∂∂‡∂∏ ‡∑Ä‡∑ì‡∂∏ ‡∂ú‡∑ê‡∂± ‡∑É‡∑ä‡∂≠‡∑ñ‡∂≠‡∑í‡∂∫‡∑í.
            </p>
        </div>
    </section>

    <!-- Reasons I Love You Section 1 (5 Reasons) --><section class="py-20 px-6">
        <div class="max-w-6xl mx-auto">
            <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î ‡∑É‡∑í‡∂ª‡∑É‡∑ä‡∂≠‡∂Ω‡∂∫ --><h2 class="text-5xl font-script text-center text-rose-gold mb-16 fade-in">‡∂∏‡∑è ‡∂î‡∂∂‡∂ß ‡∂∏‡∑ô‡∂≠‡∂ª‡∂∏‡∑ä ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∂ª‡∂± ‡∂¥‡∑î‡∂Ç‡∂†‡∑í ‡∑Ñ‡∑ö‡∂≠‡∑î ‡∂¥‡∑Ñ‡∂ö‡∑ä</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-5 gap-8 text-center">
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 1 - ‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∂±‡∑Ñ‡∑Ä (Smile Wink) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-face-smile-wink text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∂±‡∑Ñ‡∑Ä</h3>
                    <p class="text-sm text-gray-500">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω‡∂∏ ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠‡∂ö‡∂ß ‡∂Ö‡∂∏‡∂≠‡∂ö ‡∂ö‡∂ª‡∑Ä‡∂± ‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∂±‡∑Ñ‡∑Ä.</p>
                </div>
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 2 - ‡∂î‡∂∂‡∑ö ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∑Ä (Hand Holding Heart) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-hand-holding-heart text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂î‡∂∂‡∑ö ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∑Ä</h3>
                    <p class="text-sm text-gray-500">‡∂∏‡∑è ‡∂ú‡∑ê‡∂± ‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∂≠‡∑ö ‡∂á‡∂≠‡∑í ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∑Ä ‡∑Ñ‡∑è ‡∂Ω‡∑ô‡∂±‡∑ä‡∂ú‡∂≠‡∑î‡∂ö‡∂∏.</p>
                </div>

                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 3 - ‡∂î‡∂∂‡∑ö ‡∂Ü‡∑Å‡∑è‡∑Ä (Passion - UPDATED ICON) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-fire text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂î‡∂∂‡∑ö ‡∂Ü‡∑Å‡∑è‡∑Ä</h3>
                    <p class="text-sm text-gray-500">‡∂∏‡∑è ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∂ª‡∂± ‡∂Ø‡∑ö‡∂ß ‡∂î‡∂∂ ‡∂ú‡∑ô‡∂± ‡∂ë‡∂± ‡∂Ü‡∂Ω‡∑ù‡∂ö‡∂∫.</p>
                </div>
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 4 - ‡∂Ö‡∂¥‡∑ö ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠‡∑Ä‡∂Ω‡∑ä (Calendar Days) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-calendar-days text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂Ö‡∂¥‡∑ö ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠‡∑Ä‡∂Ω‡∑ä</h3>
                    <p class="text-sm text-gray-500">‡∂Ö‡∂¥ ‡∂∂‡∑ô‡∂Ø‡∑è ‡∂ú‡∂±‡∑ä‡∂±‡∑è ‡∑É‡∂ª‡∂Ω, ‡∂±‡∑í‡∑Ñ‡∂¨ ‡∂Ö‡∑Ä‡∑É‡∑ä‡∂Æ‡∑è ‡∂¥‡∑Ä‡∑è.</p>
                </div>
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 5 - ‡∂î‡∂∂ ‡∂∏‡∑è‡∂ú‡∑ö ‡∂ú‡∑ê‡∂Ω‡∂¥‡∑ì‡∂∏‡∂∫‡∑í (Infinity) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-infinity text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂î‡∂∂ ‡∂∏‡∑è‡∂ú‡∑ö ‡∂ú‡∑ê‡∂Ω‡∂¥‡∑ì‡∂∏‡∂∫‡∑í</h3>
                    <p class="text-sm text-gray-500">‡∂î‡∂∂ ‡∂∏‡∑è‡∂ú‡∑ö ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∑ö ‡∑É‡∑ë‡∂∏ ‡∂ö‡∑ú‡∂ß‡∑É‡∂ö‡∑ä‡∂∏ ‡∂¥‡∂ª‡∑í‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂Ω‡∑ô‡∑É ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂ö‡∂ª‡∂∫‡∑í.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Our Milestones Section (New Section) --><section class="py-20 px-6 bg-light-bg">
        <div class="max-w-3xl mx-auto">
            <h2 class="text-5xl font-script text-center text-deep-red mb-16">‡∂Ö‡∂¥‡∑ö ‡∑É‡∂±‡∑ä‡∂∞‡∑í‡∑É‡∑ä‡∂Æ‡∑è‡∂±</h2>
            
            <!-- Timeline Item 1 --><div class="relative mb-8 pl-10 border-l-4 border-rose-gold">
                <div class="absolute -left-3 top-0 h-6 w-6 bg-rose-gold rounded-full shadow-md flex items-center justify-center text-white"><i class="fas fa-road text-xs"></i></div>
                <p class="text-sm text-gray-500">‡∂¢‡∂±‡∑Ä‡∑è‡∂ª‡∑í 09, 2025</p>
                <h3 class="text-xl font-bold text-gray-800">‡∂Ö‡∂¥‡∑ö ‡∂¥‡∑Ö‡∂∏‡∑î ‡∑Ñ‡∂∏‡∑î‡∑Ä</h3>
                <p class="text-sm text-gray-600">‡∂∏‡∑ö ‡∂Ø‡∑Ä‡∑É ‡∂Ö‡∂¥‡∑ö ‡∂ö‡∂≠‡∑è‡∑Ä‡∑ö ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑‡∂∫‡∂∫‡∑í.</p>
            </div>

            <!-- Timeline Item 2 --><div class="relative mb-8 pl-10 border-l-4 border-rose-gold">
                <div class="absolute -left-3 top-0 h-6 w-6 bg-rose-gold rounded-full shadow-md flex items-center justify-center text-white"><i class="fas fa-heart text-xs"></i></div>
                <p class="text-sm text-gray-500">‡∂¢‡∑ñ‡∂±‡∑í 19, 2025</p>
                <h3 class="text-xl font-bold text-gray-800">‡∂∏‡∑è ‡∑É‡∑ê‡∂∂‡∑ë‡∑Ä‡∂ß‡∂∏ ‡∂î‡∂∂‡∂ß ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∂ª‡∂± ‡∂∂‡∑Ä‡∂ß ‡∂Ø‡∑ê‡∂±‡∂ú‡∂≠‡∑ä ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠</h3>
                <p class="text-sm text-gray-600">‡∂î‡∂∂‡∂ß ‡∑É‡∂Ø‡∑è‡∂ö‡∑è‡∂Ω‡∑í‡∂ö‡∑Ä ‡∂Ü‡∂Ø‡∂ª‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î ‡∑Ä‡∑ñ ‡∂Ø‡∑Ä‡∑É.</p>
            </div>
            
            <!-- Timeline Item 3 --><div class="relative pl-10 border-l-4 border-rose-gold">
                <div class="absolute -left-3 top-0 h-6 w-6 bg-rose-gold rounded-full shadow-md flex items-center justify-center text-white"><i class="fas fa-kiss text-xs"></i></div>
                <p class="text-sm text-gray-500">‡∂î‡∂ö‡∑ä‡∂≠‡∑ù‡∂∏‡∑ä‡∂∂‡∂ª‡∑ä 25, 2025</p>
                <h3 class="text-xl font-bold text-gray-800">‡∂î‡∂∂‡∂ß ‡∂Ø‡∑î‡∂±‡∑ä ‡∂¥‡∑Ö‡∂∏‡∑î ‡∑Ñ‡∑è‡∂Ø‡∑î‡∑Ä</h3>
                <p class="text-sm text-gray-600">‡∂Ü‡∂Ø‡∂ª‡∂∫‡∑ö ‡∂Ö‡∂ª‡∑î‡∂≠ ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑è ‡∂Ø‡∑î‡∂±‡∑ä ‡∂í ‡∑É‡∑ú‡∂≥‡∑î‡∂ª‡∑î ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠.</p>
            </div>
            <!-- Add more milestones here if needed for extra length --></div>
    </section>

    <!-- Reasons I Love You Section 2 (5 More Reasons - Updated Icons) --><section class="py-20 px-6">
        <div class="max-w-6xl mx-auto">
            <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î ‡∑É‡∑í‡∂ª‡∑É‡∑ä‡∂≠‡∂Ω‡∂∫ --><h2 class="text-5xl font-script text-center text-rose-gold mb-16 fade-in">‡∂î‡∂∂‡∑ö ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∑ö ‡∑É‡∑î‡∂±‡∑ä‡∂Ø‡∂ª‡∂≠‡∑ä‡∑Ä‡∂∫</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-5 gap-8 text-center">
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 6 - ‡∂î‡∂∂‡∂ú‡∑ö ‡∑É‡∑í‡∑Ñ‡∑í‡∂± (Dreams - UPDATED ICON) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-lightbulb text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂î‡∂∂‡∂ú‡∑ö ‡∑É‡∑í‡∑Ñ‡∑í‡∂±</h3>
                    <p class="text-sm text-gray-500">‡∂í‡∑Ä‡∑è ‡∑É‡∑ê‡∂∂‡∑ë ‡∂ö‡∂ª ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß ‡∂á‡∂≠‡∑í ‡∂î‡∂∂‡∑ö ‡∂ö‡∑ê‡∂¥‡∑Ä‡∑ì‡∂∏.</p>
                </div>
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 7 - ‡∂î‡∂∂‡∑ö ‡∑Ñ‡∂¨ (Voice - UPDATED ICON) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-microphone-lines text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂î‡∂∂‡∑ö ‡∑Ñ‡∂¨</h3>
                    <p class="text-sm text-gray-500">‡∂∏‡∂ß ‡∂ö‡∑í‡∑É‡∑í‡∂Ø‡∑è ‡∂ë‡∂¥‡∑è ‡∂±‡∑ú‡∑Ä‡∂± ‡∂Ω‡∑ú‡∑Ä ‡∂ë‡∂ö‡∂∏ ‡∑Å‡∂∂‡∑ä‡∂Ø‡∂∫.</p>
                </div>

                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 8 - ‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ (Helping - UPDATED ICON) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-hand-holding-medical text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏</h3>
                    <p class="text-sm text-gray-500">‡∂Ö‡∂±‡∑í‡∂≠‡∑ä ‡∂Ö‡∂∫‡∂ß ‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂î‡∂∂ ‡∂Ø‡∂ö‡∑ä‡∑Ä‡∂± ‡∂ã‡∂±‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä.</p>
                </div>
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 9 - ‡∑É‡∂≠‡∑î‡∂ß‡∑î ‡∂∂‡∑Ä (Laughter) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-grin-squint text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∑É‡∂≠‡∑î‡∂ß‡∑î ‡∂∂‡∑Ä</h3>
                    <p class="text-sm text-gray-500">‡∂î‡∂∂ ‡∑É‡∑ê‡∂∏‡∑Ä‡∑í‡∂ß‡∂∏ ‡∑É‡∂≠‡∑î‡∂ß‡∑í‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂Ü‡∂ö‡∑è‡∂ª‡∂∫.</p>
                </div>
                
                <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∑Ñ‡∑ö‡∂≠‡∑î‡∑Ä 10 - ‡∂±‡∑í‡∂±‡∑ä‡∂Ø‡∂ß ‡∂∫‡∑è‡∂∏ (Moon) --><div class="p-6 rounded-xl bg-white shadow-lg transition duration-300 hover:shadow-2xl">
                    <i class="fas fa-moon text-4xl text-rose-gold mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">‡∂±‡∑í‡∂±‡∑ä‡∂Ø‡∂ß ‡∂∫‡∑è‡∂∏</h3>
                    <p class="text-sm text-gray-500">‡∂±‡∑í‡∂Ø‡∑í‡∂∏‡∂≠‡∑Ä ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∑Ä‡∑í‡∂ß‡∂≠‡∑ä ‡∂î‡∂∂‡∂ú‡∑ö ‡∂Ω‡∑É‡∑ä‡∑É‡∂± ‡∂¥‡∑ô‡∂±‡∑î‡∂∏.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Photo Gallery Placeholder Section (Updated: Base64 Instructions Removed) --><section class="py-20 px-6 bg-light-bg">
        <div class="max-w-6xl mx-auto">
            <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∂ú‡∑ê‡∂Ω‡∂ª‡∑í ‡∑É‡∑í‡∂ª‡∑É‡∑ä‡∂≠‡∂Ω‡∂∫ --><h2 class="text-5xl font-script text-center text-rose-gold mb-12">‡∂Ö‡∂¥‡∑ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∂≠‡∂∏ ‡∂∏‡∂≠‡∂ö‡∂∫‡∂±‡∑ä (‡∂¥‡∑û‡∂Ø‡∑ä‡∂ú‡∂Ω‡∑í‡∂ö)</h2>
            <!-- Instruction -->
            <p class="text-center text-gray-600 mb-10">
                (‡∂∏‡∑ô‡∂∫ ‡∂î‡∂∂‡∂ú‡∑ö ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥ ‡∑Ä‡∑ô‡∂±‡∑î‡∑Ä‡∂ß ‡∂≠‡∂∂‡∑è ‡∂á‡∂≠‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∂∏‡∑è‡∂ª‡∑î ‡∂ª‡∑ñ‡∂¥‡∂∫‡∂±‡∑ä‡∂∫. ‡∂î‡∂∂‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂±‡∂∏‡∑ä, ‡∂∏‡∑ô‡∂∏ ‡∂ö‡∑ö‡∂≠‡∂∫ ‡∑É‡∂Ç‡∑É‡∑ä‡∂ö‡∂ª‡∂´‡∂∫ ‡∂ö‡∂ª ‡∂î‡∂∂‡∑ö‡∂∏ ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª URL ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑í‡∂∫.)
            </p>
            
            <!-- Photo placeholders remain the same -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 1 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+1" 
                         alt="‡∂Ö‡∂¥‡∂ú‡∑ö ‡∂¥‡∑Ö‡∂∏‡∑î ‡∑Ñ‡∂∏‡∑î‡∑Ä" 
                         class="w-full h-full object-cover">
                </div>
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 2 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+2" 
                         alt="‡∂Ö‡∂¥‡∂ú‡∑ö ‡∂±‡∑í‡∑Ä‡∑è‡∂©‡∑î ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è‡∑Ä" 
                         class="w-full h-full object-cover">
                </div>
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 3 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+3" 
                         alt="‡∑Ä‡∑í‡∂±‡∑ù‡∂Ø‡∂¢‡∂±‡∂ö ‡∂ª‡∑è‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∂ö‡∑ä" 
                         class="w-full h-full object-cover">
                </div>
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 4 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+4" 
                         alt="‡∑É‡∂≠‡∑î‡∂ß‡∑î ‡∂∏‡∑ú‡∑Ñ‡∑ú‡∂≠‡∂ö‡∑ä" 
                         class="w-full h-full object-cover">
                </div>
            </div>
            
            <!-- Second Row of Photos (4) -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 5 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+5" 
                         alt="‡∂≠‡∑Ä‡∂≠‡∑ä ‡∂∏‡∂≠‡∂ö‡∂∫‡∂ö‡∑ä" 
                         class="w-full h-full object-cover">
                </div>
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 6 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+6" 
                         alt="‡∑Ä‡∑í‡∑Å‡∑ö‡∑Ç ‡∂Ø‡∑í‡∂±‡∂∫‡∂ö‡∑ä" 
                         class="w-full h-full object-cover">
                </div>
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 7 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+7" 
                         alt="‡∂Ö‡∂¥‡∑ö ‡∂Ω‡∑ù‡∂ö‡∂∫" 
                         class="w-full h-full object-cover">
                </div>
                
                <!-- ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫ 8 -->
                <div class="rounded-lg overflow-hidden shadow-lg transition duration-300 hover:scale-[1.02] h-64 md:h-96">
                    <!-- Placeholder: Use a mock URL -->
                    <img src="https://placehold.co/600x400/A55B66/FFFFFF?text=‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫+8" 
                         alt="‡∂Ö‡∂¥‡∑ö ‡∂Ü‡∂Ø‡∂ª‡∂∫" 
                         class="w-full h-full object-cover">
                </div>
            </div>
        </div>
    </section>

    <!-- Our Tomorrow Section (Future Promises - LLM Feature) --><section class="py-20 px-6 bg-deep-red text-white text-center">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-5xl font-script mb-8">‡∂Ö‡∂¥‡∑ö ‡∑Ñ‡∑ô‡∂ß ‡∂Ø‡∑Ä‡∑É</h2>
            <p class="text-lg mb-4" id="future-promise-main-text">
                ‡∂Ö‡∂¥‡∑ö ‡∂∏‡∑ö ‡∂Ü‡∂Ø‡∂ª‡∂´‡∑ì‡∂∫ ‡∂ú‡∂∏‡∂±‡∑ö‡∂Ø‡∑ì, ‡∂∏‡∂∏ ‡∂î‡∂∂ ‡∑É‡∂∏‡∂ü ‡∑É‡∑ê‡∂∏‡∑Ä‡∑í‡∂ß‡∂∏ ‡∑É‡∑í‡∂ß‡∑í‡∂± ‡∂∂‡∑Ä‡∂ß ‡∂∏‡∂∏ ‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î ‡∑Ä‡∑ô‡∂±‡∑Ä‡∑è. ‡∂î‡∂∂‡∑ö ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∑É‡∑í‡∑Ñ‡∑í‡∂± ‡∑É‡∑ê‡∂∂‡∑ë ‡∂ö‡∂ª ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß‡∂≠‡∑ä, ‡∂∏‡∑ö ‡∂Ω‡∑ù‡∂ö‡∂∫‡∑ö ‡∂á‡∂≠‡∑í ‡∂Ω‡∑É‡∑ä‡∑É‡∂±‡∂∏ ‡∂≠‡∑ê‡∂±‡∑ä ‡∂î‡∂∂‡∂ß ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏‡∂ß‡∂≠‡∑ä, ‡∂Ö‡∂¥‡∑ö ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫ ‡∑É‡∑í‡∂±‡∑Ñ‡∑Ä‡∑ô‡∂±‡∑ä ‡∑Ñ‡∑è ‡∂¥‡∑ä‚Äç‡∂ª‡∑ì‡∂≠‡∑í‡∂∫‡∑ô‡∂±‡∑ä ‡∂¥‡∑î‡∂ª‡∑Ä‡∑è ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß‡∂≠‡∑ä ‡∂∏‡∂∏ ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä.
            </p>
            <p class="text-2xl font-bold mt-6">
                ‡∂∏‡∂∏ ‡∂î‡∂∂‡∂ß ‡∑É‡∂Ø‡∑Ñ‡∂ß‡∂∏ ‡∂Ü‡∂Ø‡∂ª‡∑ô‡∂∫‡∑í.
            </p>

            <!-- NEW: Promise Generator Button and Output (Gemini API Integration) -->
            <button id="generate-promise" class="mt-8 px-8 py-3 bg-white text-deep-red font-bold rounded-full shadow-lg hover:bg-rose-gold hover:text-white transition duration-300 focus:outline-none focus:ring-4 focus:ring-white focus:ring-opacity-50">
                <i class="fas fa-magic mr-2"></i> ‚ú® ‡∂±‡∑Ä ‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä‡∂ö‡∑ä ‡∑É‡∑è‡∂Ø‡∂±‡∑ä‡∂±
            </button>

            <div id="generated-promise-output" class="mt-8 p-6 bg-deep-red border-2 border-white rounded-xl shadow-inner text-lg italic text-soft-pink min-h-[50px]">
                <!-- Generated promise will appear here -->
            </div>
        </div>
    </section>

    <!-- Footer: Signature --><footer class="py-12 px-6 text-center bg-rose-gold text-white">
        <!-- ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω: ‡∂Ö‡∂≠‡∑ä‡∑É‡∂± --><p class="text-2xl mb-2">‡∑É‡∑ê‡∂∏‡∂Ø‡∑è‡∂ß‡∂∏ ‡∑É‡∑Ñ ‡∑É‡∂Ø‡∑Ñ‡∂ß‡∂∏,</p>
        <p class="font-script text-5xl">‡∂¢‡∂∫‡∂±‡∑í‡∂≥‡∑î</p>

    </footer>

    <!-- JavaScript for the Interactive Message, Kiss Emojis, and LLM/TTS Features -->
    <script>
        // --- Gemini API Configuration ---
        // ****** ‡∑Ä‡∑ê‡∂Ø‡∂ú‡∂≠‡∑ä: ‡∂î‡∂∂ ‡∂∏‡∑ô‡∂∫ VS Code ‡∑Ñ‡∑ù local browser ‡∂ë‡∂ö‡∂ö ‡∂∞‡∑è‡∑Ä‡∂±‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±‡∑ö ‡∂±‡∂∏‡∑ä,
        // ****** ‡∂î‡∂∂‡∑ö‡∂∏ API ‡∂∫‡∂≠‡∑î‡∂ª ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∑Ö ‡∂∫‡∑î‡∂≠‡∑î‡∂∫. 
        // ****** ‡∂î‡∂∂‡∂ß ‡∂Ø‡∑ì ‡∂á‡∂≠‡∑í ‡∂∫‡∂≠‡∑î‡∂ª ‡∂Ø‡∑ê‡∂±‡∑ä ‡∂á‡∂≠‡∑î‡∂Ω‡∑ä ‡∂ö‡∂ª ‡∂á‡∂≠: AIzaSyB11_E1o3BNKiZou1bKF-UvebCHNrgJbS0
        const API_KEY = "AIzaSyB11_E1o3BNKiZou1bKF-UvebCHNrgJbS0"; 
        const TEXT_MODEL = "gemini-2.5-flash-preview-09-2025";
        // const TTS_MODEL = "gemini-2.5-flash-preview-tts"; // --- REMOVED ---

        // --- NEW: Audio Playlist Configuration ---
        // --- Configuration: REPLACE THESE URLs with your actual audio file paths/URLs ---
        const VOICE_PLAYLIST = [
            "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", // Placeholder Voice 1
            "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", // Placeholder Voice 2
            "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"  // Placeholder Voice 3
            // You can add more of "her voice" files here, e.g., "voice4.mp3"
        ];
        let currentVoiceIndex = 0; // Tracks which voice to play next
        let currentAudio = null;   // Manages the currently playing audio

        // --- Utility Functions for TTS (PCM to WAV conversion) ---
        // --- base64ToArrayBuffer REMOVED ---
        // --- pcmToWav REMOVED ---

        // --- Exponential Backoff Fetcher (UPDATED FOR 'unregistered networks' error) ---
        async function fetchWithRetry(url, options, retries = 3) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) {
                        const errorBody = await response.json();
                        const errorMessage = errorBody.error?.message || `HTTP error! status: ${response.status}`;
                        
                        // Check for errors we should retry on (rate limiting, API key/auth issues, generic fetch failures)
                        if (i < retries - 1 && (
                            errorMessage.includes('Rate limit') || 
                            errorMessage.includes('API Key') || 
                            errorMessage.includes('unregistered networks')
                        )) {
                            // Log retries internally, but use exponential delay
                            const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue; // Go to next retry attempt
                        }
                        // Specifically check for the 'unregistered callers' error and exit retries if API_KEY is empty
                        if (errorMessage.includes('unregistered callers') && API_KEY === "") {
                            throw new Error("Method doesn't allow unregistered callers (callers without established identity). Please use API Key or other form of API consumer identity to call this API.");
                        }
                        
                        throw new Error(errorMessage); 
                    }
                    return response;
                } catch (error) {
                    // Check for hard network failures (e.g., DNS resolution failed)
                    if (i < retries - 1 && (error.message.includes('Failed to fetch') || error.message.includes('NetworkError'))) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        throw error;
                    }
                }
            }
            throw new Error("Failed to fetch after multiple retries.");
        }


        // --- TTS Generation Function (Feature 1) ---
        // --- generateTTS() function REMOVED ---

        // --- NEW: Playlist Player Function (Replaces generateTTS) ---
        function togglePlayNextVoice() {
            const ttsButton = document.getElementById('tts-button');
            const ttsStatus = document.getElementById('tts-status');
            const buttonIcon = ttsButton.querySelector('i');

            // Case 1: Audio exists and is currently playing -> Pause it
            if (currentAudio && !currentAudio.paused && !currentAudio.ended) {
                currentAudio.pause();
                // (Event listeners will handle icon and text)
            } 
            // Case 2: Audio exists and is paused -> Resume it
            else if (currentAudio && currentAudio.paused && !currentAudio.ended) {
                currentAudio.play();
                // (Event listeners will handle icon and text)
            } 
            // Case 3: No audio is loaded, OR the current audio has finished -> Load and play the NEXT voice
            else {
                // Get the next voice URL from our playlist
                const urlToPlay = VOICE_PLAYLIST[currentVoiceIndex];
                
                // Create a new audio object
                try {
                    currentAudio = new Audio(urlToPlay);
                } catch (e) {
                    console.error("Error creating Audio object:", e);
                    ttsStatus.textContent = `‡∑Å‡∂∂‡∑ä‡∂Ø ‡∂ú‡∑ú‡∂±‡∑î‡∑Ä ‡∑É‡∑ë‡∂Ø‡∑ì‡∂∏‡∑ö ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑í. URL ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.`;
                    return;
                }

                // --- Setup all event listeners for this new audio object ---

                // When it starts playing:
                currentAudio.onplay = () => {
                    ttsStatus.textContent = `‡∂Ü‡∂Ø‡∂ª ‡∑Ñ‡∂¨ ${currentVoiceIndex + 1} ‡∑Ä‡∑è‡∂Ø‡∂±‡∂∫ ‡∑Ä‡∑ö...`;
                    buttonIcon.classList.remove('fa-volume-up');
                    buttonIcon.classList.add('fa-pause');
                };
                
                // When it's manually paused:
                currentAudio.onpause = () => {
                    if (currentAudio.ended) return; // Don't show "paused" if it just finished naturally
                    ttsStatus.textContent = `‡∑Ñ‡∂¨ ${currentVoiceIndex + 1} ‡∑Ä‡∑í‡∂ª‡∑è‡∂∏ ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì`;
                    buttonIcon.classList.remove('fa-pause');
                    buttonIcon.classList.add('fa-volume-up');
                };

                // When it finishes playing:
                currentAudio.onended = () => {
                    ttsStatus.textContent = `‡∑Ñ‡∂¨ ${currentVoiceIndex + 1} ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∑Ä‡∑í‡∂∫. ‡∂ä‡∑Ö‡∂ü‡∂ß ‡∂ö‡∑ä‡∂Ω‡∑í‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.`;
                    buttonIcon.classList.remove('fa-pause');
                    buttonIcon.classList.add('fa-volume-up');
                    // We don't increment the index here, we wait for the next click
                };

                // If the audio file fails to load:
                currentAudio.onerror = (e) => {
                    console.error("Audio Load Error:", e);
                    ttsStatus.textContent = `‡∑Å‡∂∂‡∑ä‡∂Ø ‡∂ú‡∑ú‡∂±‡∑î‡∑Ä ${currentVoiceIndex + 1} ‡∂¥‡∑ê‡∂ß‡∑Ä‡∑ì‡∂∏‡∑ö ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑í.`;
                    buttonIcon.classList.remove('fa-pause');
                    buttonIcon.classList.add('fa-volume-up');
                    currentAudio = null; // Reset
                };

                // --- End of event listeners ---

                // Start playing the new audio
                currentAudio.play().catch(error => {
                    // Handle potential play errors (e.g., autoplay restrictions)
                    console.error("Audio Play Error:", error);
                    ttsStatus.textContent = `‡∑Å‡∂∂‡∑ä‡∂Ø‡∂∫ ‡∑Ä‡∑è‡∂Ø‡∂±‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑í: ${error.message}`;
                    buttonIcon.classList.remove('fa-pause');
                    buttonIcon.classList.add('fa-volume-up');
                    currentAudio = null; // Reset
                });

                // IMPORTANT: Move to the next index, ready for the *next* click
                // The % (modulo) operator makes it loop back to 0 at the end of the list
                currentVoiceIndex = (currentVoiceIndex + 1) % VOICE_PLAYLIST.length;
            }
        }


        // --- Promise Generation Function (LLM Text) (Feature 2) ---
        async function generatePromise() {
            const generateButton = document.getElementById('generate-promise');
            const outputDiv = document.getElementById('generated-promise-output');
            
            if (API_KEY === "") {
                outputDiv.innerHTML = '<p class="text-soft-pink">‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂≠‡∑è ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä: API ‡∂∫‡∂≠‡∑î‡∂ª ‡∑Ñ‡∑í‡∑É‡∑ä‡∂∫. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂∫‡∂≠‡∑î‡∂ª ‡∂á‡∂≠‡∑î‡∑Ö‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</p>';
                return;
            }

            // Disable button and show loading
            generateButton.disabled = true;
            const originalText = generateButton.innerHTML;
            generateButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> ‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä ‡∑É‡∑è‡∂Ø‡∂∏‡∑í‡∂±‡∑ä...';
            outputDiv.innerHTML = '<p>‡∂Ü‡∂Ø‡∂ª ‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä‡∂ö‡∑ä ‡∂Ω‡∑í‡∂∫‡∂∏‡∑í‡∂±‡∑ä...</p>';

            try {
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${TEXT_MODEL}:generateContent?key=${API_KEY}`;
                
                const systemPrompt = "You are a deeply romantic and eloquent Sri Lankan lover. Your task is to generate a single, unique, and heartfelt future promise for a long-term relationship. The promise MUST be written entirely in the Sinhala language, using formal and poetic phrasing. Do not include any introductory phrases or context, only the promise itself. Use Sinhala characters only.";
                
                const userQuery = "Generate a profound future promise focusing on shared dreams, unconditional support, and everlasting togetherness.";

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const response = await fetchWithRetry(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const generatedText = result?.candidates?.[0]?.content?.parts?.[0]?.text;

                if (generatedText) {
                    outputDiv.innerHTML = `<p class="text-white">${generatedText}</p>`;
                } else {
                    outputDiv.innerHTML = '<p class="text-soft-pink">‡∂¥‡∑ú‡∂ª‡∑ú‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä‡∂ö‡∑ä ‡∑É‡∑è‡∂Ø‡∑ì‡∂∏‡∂ß ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∫. ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. (No output)</p>';
                }

            } catch (error) {
                console.error("LLM API Error:", error);
                // Improved user feedback for API failure
                outputDiv.innerHTML = `<p class="text-soft-pink">‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂≠‡∑è ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä: ${error.message}. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª ‡∂ö‡∑í‡∑Ñ‡∑í‡∂¥‡∂∫‡∂ö‡∑í‡∂±‡∑ä ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</p>`;
            } finally {
                generateButton.disabled = false;
                generateButton.innerHTML = originalText;
            }
        }

        // --- Kiss Emoji Animation Function (Feature 3) ---
        function createKissEmoji() {
            const emoji = document.createElement('div');
            emoji.innerHTML = 'üòò'; // Kiss emoji
            emoji.className = 'kiss-emoji';
            document.body.appendChild(emoji);

            // Start position (usually near the button)
            const startX = window.innerWidth * 0.5;
            const startY = window.innerHeight * 0.25;
            
            // Randomize end position (floating upwards)
            const finalX = (Math.random() - 0.5) * window.innerWidth * 0.8;
            const finalY = -(window.innerHeight * 0.5) - (Math.random() * 100); // Float high up

            emoji.style.left = `${startX}px`;
            emoji.style.top = `${startY}px`;
            
            // Set CSS variables for the animation
            emoji.style.setProperty('--final-x', `${finalX}px`);
            emoji.style.setProperty('--final-y', `${finalY}px`);

            // Remove the emoji after the animation completes
            emoji.addEventListener('animationend', () => {
                emoji.remove();
            });
        }


        // --- Scroll Fade Effect (Feature 4) ---
        function updateScrollFade() {
            const overlay = document.getElementById('scroll-overlay');
            if (!overlay) return;
            
            // Get the total scrollable height of the document
            const scrollHeight = document.documentElement.scrollHeight;
            // Get the height of the viewport
            const clientHeight = document.documentElement.clientHeight;
            // Get the current scroll position
            const scrollTop = window.scrollY || document.documentElement.scrollTop;

            // Calculate the maximum scroll position
            const maxScroll = scrollHeight - clientHeight;
            
            // Avoid division by zero if not scrollable
            if (maxScroll <= 0) {
                overlay.style.opacity = 0;
                return;
            }

            // Calculate opacity: 0 at the top, 1 at the bottom
            let opacity = (scrollTop / maxScroll) * 0.5; // Max opacity 0.5
            
            // Cap opacity between 0 and 0.5
            opacity = Math.max(0, Math.min(0.5, opacity));
            
            overlay.style.opacity = opacity;
        }

        // Add scroll event listener
        window.addEventListener('scroll', updateScrollFade);

        
        // --- Event Listeners (Initialization) ---
        document.addEventListener('DOMContentLoaded', () => {
            // Secret Message Button
            const revealButton = document.getElementById('reveal-message');
            const secretMessageSection = document.getElementById('secret-message');
            if (revealButton && secretMessageSection) {
                revealButton.addEventListener('click', () => {
                    secretMessageSection.classList.toggle('hidden');
                    createKissEmoji(); // Trigger kiss animation
                    
                    // Scroll to the message if it's being revealed
                    if (!secretMessageSection.classList.contains('hidden')) {
                        secretMessageSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            }

            // --- Hook up the TTS Button ---
            const ttsButton = document.getElementById('tts-button');
            if (ttsButton) {
                ttsButton.addEventListener('click', togglePlayNextVoice);
            }

            // LLM Promise Generator Button
            const promiseButton = document.getElementById('generate-promise');
            if (promiseButton) {
                promiseButton.addEventListener('click', generatePromise);
            }

            // Initial Call to Set Overlay
            updateScrollFade();
        });
    </script>
</body>
</html>

